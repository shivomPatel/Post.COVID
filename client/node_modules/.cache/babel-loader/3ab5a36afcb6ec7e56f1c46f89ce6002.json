{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Shivom/Desktop/Post.COVID4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/Shivom/Desktop/Post.COVID4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Shivom/Desktop/Post.COVID4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Shivom/Desktop/Post.COVID4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Shivom/Desktop/Post.COVID4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Shivom/Desktop/Post.COVID4/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Navbar from\"../components/Navbar/navbar\";import Footer from\"../components/Footer/footer\";import Star from\"../components/Star/Star\";import axios from\"axios\";import\"./events.css\";var seat_geek_client_id=\"MjEyMDE0MTh8MTU5MTE0NjEzMy45Nw\";var zomato_key=\"a709f309de1a20ac8da79907af27d37c\";var Events=/*#__PURE__*/function(_Component){_inherits(Events,_Component);var _super=_createSuper(Events);function Events(props){var _this;_classCallCheck(this,Events);_this=_super.call(this,props);_this.renderStars=function(rating){// console.log(this.state.reviews);\nvar stars=[];for(var i=0;i<5;i++){if(i<rating){stars.push(/*#__PURE__*/React.createElement(Star,{key:i,state:\"active\"}));}else{stars.push(/*#__PURE__*/React.createElement(Star,{key:i,state:\"none\"}));}}return stars;};_this.state={restaurants:[],activities:[],isActiveRestaurants:false,isActiveActivities:false};return _this;}_createClass(Events,[{key:\"createRestaurants\",value:function(){var _createRestaurants=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var res,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:res=[];for(i=0;i<data.nearby_restaurants.length;i++){res.push(/*#__PURE__*/React.createElement(\"div\",{key:i,align:\"left\",className:\"card-e\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h4\",null,data.nearby_restaurants[i].restaurant.name),/*#__PURE__*/React.createElement(\"h6\",null,data.nearby_restaurants[i].restaurant.cuisines),/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},/*#__PURE__*/React.createElement(\"span\",{className:\"rating\"},\" \"),this.renderStars(Math.round(data.nearby_restaurants[i].restaurant.user_rating.aggregate_rating))),/*#__PURE__*/React.createElement(\"a\",{href:data.nearby_restaurants[i].restaurant.url,className:\"visit-button\"},\"Visit Website\"),/*#__PURE__*/React.createElement(\"a\",{href:data.nearby_restaurants[i].restaurant.menu_url,className:\"menu-button\"},\"Menu\")),/*#__PURE__*/React.createElement(\"hr\",null)));}this.setState({restaurants:res,isActiveRestaurants:true});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function createRestaurants(_x){return _createRestaurants.apply(this,arguments);}return createRestaurants;}()},{key:\"formatDate\",value:function formatDate(event){var date=new Date(event.datetime_local);var f_date=date.toLocaleTimeString();var date_substr=f_date.substring(0,f_date.lastIndexOf(\":\"))+\" \"+f_date.substring(f_date.length-2);return date_substr;}},{key:\"getPopStyle\",value:function getPopStyle(value){var num=new Number(value);var per=Math.round(num.toString());var color;// Red - not very good\nif(per<=33)color=\"red\";// Yellow - okay\nif(per>33&&per<=66)color=\"yellow\";// Green - pretty goog\nif(per>=66)color=\"#42f598\";return{backgroundColor:color,width:per.toString()+\"%\"};}},{key:\"getEvents\",value:function(){var _getEvents=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,res,i,event,taxes,date,time_of_event,j;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios({method:\"GET\",url:\"https://api.seatgeek.com/2/events?geoip=true&range=12mi&client_id=\".concat(seat_geek_client_id)});case 2:response=_context2.sent;res=[];for(i=0;i<response.data.events.length;i++){event=response.data.events[i];taxes=[];date=new Date(event.datetime_local);time_of_event=this.formatDate(event);for(j=0;j<event.taxonomies.length;j++){taxes.push(/*#__PURE__*/React.createElement(\"span\",{key:j+1,className:\"types\"},event.taxonomies[j].name,\" \"));}res.push(/*#__PURE__*/React.createElement(\"div\",{key:i},/*#__PURE__*/React.createElement(\"div\",{align:\"left\",className:\"card-e\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"event-title\"},event.title,\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"status-title\"},event.is_open?/*#__PURE__*/React.createElement(\"span\",{className:\"open\"},\"Open\"):/*#__PURE__*/React.createElement(\"span\",{className:\"closed\"},\"Closed\"))),/*#__PURE__*/React.createElement(\"h5\",{className:\"event-taxes\"},taxes),/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"type-title\"},\"Popularity: \"),/*#__PURE__*/React.createElement(\"span\",{className:\"popularity\"},event.popularity===0?\"No Rating\":(event.popularity*100).toFixed(2)+\"%\",\" \")),event.popularity===0?null:/*#__PURE__*/React.createElement(\"div\",{className:\"progress\"},/*#__PURE__*/React.createElement(\"div\",{className:\"progress-bar\",role:\"progressbar\",\"aria-valuenow\":\"70\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\",style:this.getPopStyle((event.popularity*100).toFixed(2))})),/*#__PURE__*/React.createElement(\"p\",{className:\"event-location\"},event.venue.address,\", \",event.venue.display_location),/*#__PURE__*/React.createElement(\"a\",{href:event.url,className:\"visit-button\"},\"Visit Website\"),/*#__PURE__*/React.createElement(\"span\",{className:\"event-date\"},date.toDateString(),\" - \",time_of_event))),/*#__PURE__*/React.createElement(\"hr\",{className:\"hr-line\"})));}this.setState({activities:res,isActiveActivities:true});case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function getEvents(){return _getEvents.apply(this,arguments);}return getEvents;}()},{key:\"getRestaurants\",value:function getRestaurants(){var _this2=this;navigator.geolocation.getCurrentPosition(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(position){var lat,lng,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:lat=position.coords.latitude;lng=position.coords.longitude;_context3.next=4;return axios({method:\"GET\",url:\"https://developers.zomato.com/api/v2.1/geocode?lat=\".concat(lat,\"&lon=\").concat(lng),headers:{\"user-key\":zomato_key,\"content-type\":\"application/json\"}});case 4:response=_context3.sent;_this2.createRestaurants(response.data);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref.apply(this,arguments);};}());}},{key:\"componentDidMount\",value:function componentDidMount(){this.getRestaurants();this.getEvents();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"meta\",{charSet:\"utf-8\"}),/*#__PURE__*/React.createElement(\"meta\",{name:\"viewport\",content:\"width=device-width, initial-scale=1\"}),/*#__PURE__*/React.createElement(\"link\",{rel:\"stylesheet\",href:\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\"}),/*#__PURE__*/React.createElement(\"script\",{src:\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"}),/*#__PURE__*/React.createElement(\"script\",{src:\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"}),/*#__PURE__*/React.createElement(\"script\",{src:\"https://kit.fontawesome.com/a076d05399.js\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"backgroun\"},/*#__PURE__*/React.createElement(Navbar,{items:[\"u\",\"u\",\"u\",\"active\"]}),/*#__PURE__*/React.createElement(\"div\",{className:\"row-b\"},/*#__PURE__*/React.createElement(\"div\",{className:\"column-b\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"food-column-title\"},\"Food\"),/*#__PURE__*/React.createElement(\"p\",{className:\"column-description\"},\" Restaurants Near You \"),/*#__PURE__*/React.createElement(\"div\",{className:\"restaurant-list\"},this.state.isActiveRestaurants?this.state.restaurants:/*#__PURE__*/React.createElement(\"div\",{align:\"center\",className:\"loader ldr1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"column-b-2\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"activity-column-title\"},\"Activity\"),/*#__PURE__*/React.createElement(\"p\",{className:\"column-description\"},\"Activities Near You\"),/*#__PURE__*/React.createElement(\"div\",{className:\"events-list\"},this.state.isActiveActivities?this.state.activities:/*#__PURE__*/React.createElement(\"div\",{align:\"center\",className:\"loader ldr2\"}))))),/*#__PURE__*/React.createElement(Footer,null));}}]);return Events;}(Component);export default Events;","map":{"version":3,"sources":["/Users/Shivom/Desktop/Post.COVID4/client/src/pages/Events/Events.js"],"names":["React","Component","Navbar","Footer","Star","axios","seat_geek_client_id","zomato_key","Events","props","renderStars","rating","stars","i","push","state","restaurants","activities","isActiveRestaurants","isActiveActivities","data","res","nearby_restaurants","length","restaurant","name","cuisines","Math","round","user_rating","aggregate_rating","url","menu_url","setState","event","date","Date","datetime_local","f_date","toLocaleTimeString","date_substr","substring","lastIndexOf","value","num","Number","per","toString","color","backgroundColor","width","method","response","events","taxes","time_of_event","formatDate","j","taxonomies","title","is_open","popularity","toFixed","getPopStyle","venue","address","display_location","toDateString","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","headers","createRestaurants","getRestaurants","getEvents"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Navbar from \"../components/Navbar/navbar\";\nimport Footer from \"../components/Footer/footer\";\nimport Star from \"../components/Star/Star\";\nimport axios from \"axios\";\nimport \"./events.css\";\n\nconst seat_geek_client_id = \"MjEyMDE0MTh8MTU5MTE0NjEzMy45Nw\";\nconst zomato_key = \"a709f309de1a20ac8da79907af27d37c\";\n\nclass Events extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      restaurants: [],\n      activities: [],\n      isActiveRestaurants: false,\n      isActiveActivities: false,\n    };\n  }\n\n  async createRestaurants(data) {\n    let res = [];\n    for (var i = 0; i < data.nearby_restaurants.length; i++) {\n      res.push(\n        <div key={i} align=\"left\" className=\"card-e\">\n          <div className=\"card-body\">\n            <h4>{data.nearby_restaurants[i].restaurant.name}</h4>\n            <h6>{data.nearby_restaurants[i].restaurant.cuisines}</h6>\n            <p className=\"card-text\">\n              <span className=\"rating\"> </span>\n              {this.renderStars(\n                Math.round(\n                  data.nearby_restaurants[i].restaurant.user_rating\n                    .aggregate_rating\n                )\n              )}\n            </p>\n            <a\n              href={data.nearby_restaurants[i].restaurant.url}\n              className=\"visit-button\"\n            >\n              Visit Website\n            </a>\n            <a\n              href={data.nearby_restaurants[i].restaurant.menu_url}\n              className=\"menu-button\"\n            >\n              Menu\n            </a>\n          </div>\n          <hr />\n        </div>\n      );\n    }\n    this.setState({\n      restaurants: res,\n      isActiveRestaurants: true,\n    });\n  }\n\n  formatDate(event) {\n    let date = new Date(event.datetime_local);\n    let f_date = date.toLocaleTimeString();\n    let date_substr =\n      f_date.substring(0, f_date.lastIndexOf(\":\")) +\n      \" \" +\n      f_date.substring(f_date.length - 2);\n    return date_substr;\n  }\n\n  renderStars = (rating) => {\n    // console.log(this.state.reviews);\n    let stars = [];\n    for (var i = 0; i < 5; i++) {\n      if (i < rating) {\n        stars.push(<Star key={i} state={\"active\"} />);\n      } else {\n        stars.push(<Star key={i} state={\"none\"} />);\n      }\n    }\n    return stars;\n  };\n\n  getPopStyle(value) {\n    var num = new Number(value);\n    var per = Math.round(num.toString());\n    var color;\n    // Red - not very good\n    if (per <= 33) color = \"red\";\n    // Yellow - okay\n    if (per > 33 && per <= 66) color = \"yellow\";\n    // Green - pretty goog\n    if (per >= 66) color = \"#42f598\";\n\n    return { backgroundColor: color, width: per.toString() + \"%\" };\n  }\n\n  async getEvents() {\n    const response = await axios({\n      method: \"GET\",\n      url: `https://api.seatgeek.com/2/events?geoip=true&range=12mi&client_id=${seat_geek_client_id}`,\n    });\n    let res = [];\n    for (var i = 0; i < response.data.events.length; i++) {\n      let event = response.data.events[i];\n      let taxes = [];\n      let date = new Date(event.datetime_local);\n      let time_of_event = this.formatDate(event);\n      for (var j = 0; j < event.taxonomies.length; j++) {\n        taxes.push(\n          <span key={j + 1} className=\"types\">\n            {event.taxonomies[j].name}{\" \"}\n          </span>\n        );\n      }\n      res.push(\n        <div key={i}>\n          <div align=\"left\" className=\"card-e\">\n            <div className=\"card-body\">\n              <h4 className=\"event-title\">\n                {event.title}{\" \"}\n                <span className=\"status-title\">\n                  {event.is_open ? (\n                    <span className=\"open\">Open</span>\n                  ) : (\n                    <span className=\"closed\">Closed</span>\n                  )}\n                </span>\n              </h4>\n              <h5 className=\"event-taxes\">\n                {/* <span className=\"type-title\">Type: </span> */}\n                {taxes}\n              </h5>\n              <h5>\n                <span className=\"type-title\">Popularity: </span>\n                <span className=\"popularity\">\n                  {event.popularity === 0\n                    ? \"No Rating\"\n                    : (event.popularity * 100).toFixed(2) + \"%\"}{\" \"}\n                </span>\n              </h5>\n              {event.popularity === 0 ? null : (\n                <div className=\"progress\">\n                  <div\n                    className=\"progress-bar\"\n                    role=\"progressbar\"\n                    aria-valuenow=\"70\"\n                    aria-valuemin=\"0\"\n                    aria-valuemax=\"100\"\n                    style={this.getPopStyle(\n                      (event.popularity * 100).toFixed(2)\n                    )}\n                  ></div>\n                </div>\n              )}\n              <p className=\"event-location\">\n                {event.venue.address}, {event.venue.display_location}\n              </p>\n              <a href={event.url} className=\"visit-button\">\n                Visit Website\n              </a>\n              <span className=\"event-date\">\n                {date.toDateString()} - {time_of_event}\n              </span>\n            </div>\n          </div>\n          <hr className=\"hr-line\" />\n        </div>\n      );\n    }\n\n    this.setState({\n      activities: res,\n      isActiveActivities: true,\n    });\n  }\n\n  getRestaurants() {\n    navigator.geolocation.getCurrentPosition(async (position) => {\n      let lat = position.coords.latitude;\n      let lng = position.coords.longitude;\n      const response = await axios({\n        method: \"GET\",\n        url: `https://developers.zomato.com/api/v2.1/geocode?lat=${lat}&lon=${lng}`,\n        headers: {\n          \"user-key\": zomato_key,\n          \"content-type\": \"application/json\",\n        },\n      });\n      this.createRestaurants(response.data);\n    });\n  }\n\n  componentDidMount() {\n    this.getRestaurants();\n    this.getEvents();\n  }\n\n  render() {\n    return (\n      <div>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\"\n        ></link>\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\n        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>\n        <script src=\"https://kit.fontawesome.com/a076d05399.js\"></script>\n        <div className=\"backgroun\">\n          <Navbar items={[\"u\", \"u\", \"u\", \"active\"]}></Navbar>\n          <div className=\"row-b\">\n            <div className=\"column-b\">\n              <h2 className=\"food-column-title\">Food</h2>\n              <p className=\"column-description\"> Restaurants Near You </p>\n              <div className=\"restaurant-list\">\n                {this.state.isActiveRestaurants ? (\n                  this.state.restaurants\n                ) : (\n                  <div align=\"center\" className=\"loader ldr1\"></div>\n                )}\n              </div>\n            </div>\n            <div className=\"column-b-2\">\n              <h2 className=\"activity-column-title\">Activity</h2>\n              <p className=\"column-description\">Activities Near You</p>\n              <div className=\"events-list\">\n                {this.state.isActiveActivities ? (\n                  this.state.activities\n                ) : (\n                  <div align=\"center\" className=\"loader ldr2\"></div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default Events;\n"]},"metadata":{},"sourceType":"module"}