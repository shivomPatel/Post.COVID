{"ast":null,"code":"var _jsxFileName = \"/Users/Shivom/Desktop/Post.COVID4/client/src/pages/Reviews/Reviews.js\";\nimport React, { Component } from \"react\";\nimport Navbar from \"../components/Navbar/navbar\";\nimport Footer from \"../components/Footer/footer\";\nimport Star from \"../components/Star/Star\";\nimport axios from \"axios\";\nimport \"./reviews.css\";\n\nclass Review extends Component {\n  constructor() {\n    super();\n\n    this.handleShow = () => {\n      this.setState({\n        isActive: true\n      });\n    };\n\n    this.handleHide = () => {\n      this.setState({\n        isActive: false\n      });\n    };\n\n    this.renderStars = rating => {\n      let stars = [];\n\n      for (var i = 0; i < 5; i++) {\n        if (i < rating) {\n          stars.push( /*#__PURE__*/React.createElement(Star, {\n            key: i + 1,\n            state: \"active\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 20\n            }\n          }));\n        } else {\n          stars.push( /*#__PURE__*/React.createElement(Star, {\n            key: i + 1,\n            state: \"none\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 20\n            }\n          }));\n        }\n      }\n\n      return stars;\n    };\n\n    this.renderReviews = () => {\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 7\n        }\n      }, this.state.reviews.reverse().map((review, i) => /*#__PURE__*/React.createElement(\"li\", {\n        key: i,\n        className: \"reviews-list-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"review\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"place-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }\n      }, review.place), /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"review-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }\n      }, review.name, \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"star-rating\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      }, this.renderStars(review.rating))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"date-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"written-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }\n      }, \"Reviewed:\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"date-string\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 19\n        }\n      }, this.getDate(review.date)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"review-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }\n      }, review.review_text)), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.state = {\n      isActive: false,\n      reviews: [],\n      validation: \"\"\n    };\n    this.handleHide = this.handleHide.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  isValidInput(name, review, place) {\n    var returnString = \"\";\n    if (name.length < 1) returnString += \"• Invalid Name: Name is Empty\\n\";\n    if (name.length > 20) returnString += \"• Invalid Name: Name is longer than 20 characters\\n\";\n    if (review.length < 1) returnString += \"• Invalid Review: Review is Empty\\n\";\n    if (review.length > 1000) returnString += \"• Invalid Review: Review is longer than 1000 characters.\\n\";\n    if (place.length < 1) returnString += \"• Invalid Place: Place is Empty\\n\";\n    if (place.length > 20) returnString += \"• Invalid Place: Place is longer than 20 characters\\n\";\n    return returnString;\n  }\n\n  handleSubmit(event) {\n    this.handleHide();\n    var nameInput = document.getElementById(\"name-input\").value;\n    var reviewInput = document.getElementById(\"review-input\").value;\n    var ratingInput = document.getElementById(\"rating-input\").value;\n    var placeInput = document.getElementById(\"place-input\").value;\n    if (ratingInput > 5) ratingInput = 5;\n    if (ratingInput < 1) ratingInput = 1;\n    const newReview = {\n      place: placeInput,\n      rating: parseInt(ratingInput),\n      name: nameInput,\n      review_text: reviewInput,\n      date: new Date()\n    };\n    var ret = this.isValidInput(nameInput, reviewInput, placeInput);\n\n    if (ret.length !== 0) {\n      window.alert(\"AfterMath\\n\\n\" + ret);\n    } else {\n      axios.post(\"http://localhost:5000/reviews/add\", newReview).then(res => console.log(res.data));\n      this.setState({\n        reviews: this.state.reviews.concat(newReview)\n      });\n    }\n  }\n\n  getAverageRating(reviews) {\n    var totalRating = 0;\n    var reviewLen = reviews.length;\n\n    for (var i = 0; i < reviewLen; i++) totalRating += parseInt(reviews[i].rating);\n\n    return totalRating / reviewLen;\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:5000/reviews\").then(response => {\n      if (response.data.length > 0) {\n        this.setState({\n          reviews: response.data\n        });\n      }\n    });\n  }\n\n  getDate(date) {\n    var newDate = new Date(date);\n    var options = {\n      weekday: \"long\",\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\"\n    };\n    return newDate.toLocaleDateString(\"en-US\", options);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"meta\", {\n      charSet: \"utf-8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"meta\", {\n      name: \"viewport\",\n      content: \"width=device-width, initial-scale=1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://kit.fontawesome.com/a076d05399.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      align: \"center\",\n      className: \"review-background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      items: [\"u\", \"u\", \"active\", \"u\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      align: \"center\",\n      className: \"reviews-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        marginTop: \"70px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }, \"Reviews\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"review-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, \"Review your trip here by telling us what went wrong, what went right, what you liked, and what you didn't like.\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"review-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"average-box\",\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    }, \"Average review rating:\", \"  \", /*#__PURE__*/React.createElement(\"strong\", {\n      className: \"average-rating\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    }, this.getAverageRating(this.state.reviews).toFixed(1))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }), this.renderReviews()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"review-submission-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }, !this.state.isActive ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"write-button\",\n      onClick: this.handleShow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }, \"Write a Review\") : null, this.state.isActive ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"user-review-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 19\n      }\n    }, \"Your Review\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"place-input\",\n      placeholder: \"Place\",\n      type: \"text\",\n      id: \"place-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"name-input\",\n      placeholder: \"Name\",\n      type: \"text\",\n      id: \"name-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"review-input\",\n      placeholder: \"Write review here...\",\n      id: \"review-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"rating-input-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 19\n      }\n    }, \"Rating:\", \" \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"rating-input\",\n      type: \"NUMBER\",\n      min: \"1\",\n      max: \"5\",\n      step: \"1\",\n      placeholder: \"5\",\n      size: \"6\",\n      className: \"input-spinner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }\n    })))) : null, this.state.isActive ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"write-button submit\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }\n    }, \"Submit your Review\") : null)), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default Review;","map":{"version":3,"sources":["/Users/Shivom/Desktop/Post.COVID4/client/src/pages/Reviews/Reviews.js"],"names":["React","Component","Navbar","Footer","Star","axios","Review","constructor","handleShow","setState","isActive","handleHide","renderStars","rating","stars","i","push","renderReviews","state","reviews","reverse","map","review","place","name","getDate","date","review_text","validation","bind","handleSubmit","isValidInput","returnString","length","event","nameInput","document","getElementById","value","reviewInput","ratingInput","placeInput","newReview","parseInt","Date","ret","window","alert","post","then","res","console","log","data","concat","getAverageRating","totalRating","reviewLen","componentDidMount","get","response","newDate","options","weekday","year","month","day","toLocaleDateString","render","marginTop","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Navbar from \"../components/Navbar/navbar\";\nimport Footer from \"../components/Footer/footer\";\nimport Star from \"../components/Star/Star\";\nimport axios from \"axios\";\nimport \"./reviews.css\";\n\nclass Review extends Component {\n  constructor() {\n    super();\n    this.state = {\n      isActive: false,\n      reviews: [],\n      validation: \"\",\n    };\n    this.handleHide = this.handleHide.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  isValidInput(name, review, place) {\n    var returnString = \"\";\n    if (name.length < 1) returnString += \"• Invalid Name: Name is Empty\\n\";\n    if (name.length > 20)\n      returnString += \"• Invalid Name: Name is longer than 20 characters\\n\";\n\n    if (review.length < 1)\n      returnString += \"• Invalid Review: Review is Empty\\n\";\n    if (review.length > 1000)\n      returnString +=\n        \"• Invalid Review: Review is longer than 1000 characters.\\n\";\n\n    if (place.length < 1) returnString += \"• Invalid Place: Place is Empty\\n\";\n    if (place.length > 20)\n      returnString += \"• Invalid Place: Place is longer than 20 characters\\n\";\n\n    return returnString;\n  }\n\n  handleShow = () => {\n    this.setState({\n      isActive: true,\n    });\n  };\n\n  handleHide = () => {\n    this.setState({\n      isActive: false,\n    });\n  };\n\n  renderStars = (rating) => {\n    let stars = [];\n    for (var i = 0; i < 5; i++) {\n      if (i < rating) {\n        stars.push(<Star key={i + 1} state={\"active\"} />);\n      } else {\n        stars.push(<Star key={i + 1} state={\"none\"} />);\n      }\n    }\n    return stars;\n  };\n\n  renderReviews = () => {\n    return (\n      <ul>\n        {this.state.reviews.reverse().map((review, i) => (\n          <li key={i} className=\"reviews-list-item\">\n            <div className=\"review\">\n              <h5 className=\"place-header\">{review.place}</h5>\n              <h3 className=\"review-title\">\n                {review.name}{\" \"}\n                <span className=\"star-rating\">\n                  {this.renderStars(review.rating)}\n                </span>\n              </h3>\n              <div className=\"date-box\">\n                <span className=\"written-title\">\n                  Reviewed:{\" \"}\n                  <span className=\"date-string\">\n                    {this.getDate(review.date)}\n                  </span>\n                </span>\n              </div>\n              <div className=\"review-content\">{review.review_text}</div>\n            </div>\n            <hr></hr>\n          </li>\n        ))}\n      </ul>\n    );\n  };\n\n  handleSubmit(event) {\n    this.handleHide();\n    var nameInput = document.getElementById(\"name-input\").value;\n    var reviewInput = document.getElementById(\"review-input\").value;\n    var ratingInput = document.getElementById(\"rating-input\").value;\n    var placeInput = document.getElementById(\"place-input\").value;\n    if (ratingInput > 5) ratingInput = 5;\n    if (ratingInput < 1) ratingInput = 1;\n\n    const newReview = {\n      place: placeInput,\n      rating: parseInt(ratingInput),\n      name: nameInput,\n      review_text: reviewInput,\n      date: new Date(),\n    };\n\n    var ret = this.isValidInput(nameInput, reviewInput, placeInput);\n    if (ret.length !== 0) {\n      window.alert(\"AfterMath\\n\\n\" + ret);\n    } else {\n      axios\n        .post(\"http://localhost:5000/reviews/add\", newReview)\n        .then((res) => console.log(res.data));\n\n      this.setState({\n        reviews: this.state.reviews.concat(newReview),\n      });\n    }\n  }\n\n  getAverageRating(reviews) {\n    var totalRating = 0;\n    var reviewLen = reviews.length;\n    for (var i = 0; i < reviewLen; i++)\n      totalRating += parseInt(reviews[i].rating);\n    return totalRating / reviewLen;\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:5000/reviews\").then((response) => {\n      if (response.data.length > 0) {\n        this.setState({\n          reviews: response.data,\n        });\n      }\n    });\n  }\n\n  getDate(date) {\n    var newDate = new Date(date);\n    var options = {\n      weekday: \"long\",\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    };\n    return newDate.toLocaleDateString(\"en-US\", options);\n  }\n\n  render() {\n    return (\n      <div>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\"\n        ></link>\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js\"></script>\n        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>\n        <script src=\"https://kit.fontawesome.com/a076d05399.js\"></script>\n\n        <div align=\"center\" className=\"review-background\">\n          <Navbar items={[\"u\", \"u\", \"active\", \"u\"]}></Navbar>\n          <div align=\"center\" className=\"reviews-title\">\n            <h2 style={{ marginTop: \"70px\" }}>Reviews</h2>\n            <p className=\"review-description\">\n              Review your trip here by telling us what went wrong, what went\n              right, what you liked, and what you didn't like.\n            </p>\n          </div>\n          <div className=\"review-box\">\n            <div className=\"average-box\" align=\"left\">\n              Average review rating:{\"  \"}\n              <strong className=\"average-rating\">\n                {this.getAverageRating(this.state.reviews).toFixed(1)}\n              </strong>\n            </div>\n            <hr></hr>\n            {this.renderReviews()}\n          </div>\n          <div className=\"review-submission-box\">\n            {!this.state.isActive ? (\n              <button className=\"write-button\" onClick={this.handleShow}>\n                Write a Review\n              </button>\n            ) : null}\n            {this.state.isActive ? (\n              <div>\n                <div align=\"left\">\n                  <h3 className=\"user-review-title\">Your Review</h3>\n                </div>\n\n                <form onSubmit={this.handleSubmit}>\n                  <div>\n                    <span>\n                      <input\n                        className=\"place-input\"\n                        placeholder=\"Place\"\n                        type=\"text\"\n                        id=\"place-input\"\n                      />\n                    </span>\n                  </div>\n                  <div>\n                    <input\n                      className=\"name-input\"\n                      placeholder=\"Name\"\n                      type=\"text\"\n                      id=\"name-input\"\n                    />\n                  </div>\n                  <div>\n                    <textarea\n                      className=\"review-input\"\n                      placeholder=\"Write review here...\"\n                      id=\"review-input\"\n                    ></textarea>\n                  </div>\n                  <span className=\"rating-input-box\">\n                    Rating:{\" \"}\n                    <input\n                      id=\"rating-input\"\n                      type=\"NUMBER\"\n                      min=\"1\"\n                      max=\"5\"\n                      step=\"1\"\n                      placeholder=\"5\"\n                      size=\"6\"\n                      className=\"input-spinner\"\n                    ></input>\n                  </span>\n                </form>\n              </div>\n            ) : null}\n            {this.state.isActive ? (\n              <button\n                className=\"write-button submit\"\n                onClick={this.handleSubmit}\n              >\n                Submit your Review\n              </button>\n            ) : null}\n          </div>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default Review;\n"]},"metadata":{},"sourceType":"module"}